# Getting and Cleaning Data: Course Project

The course project subject was : 

You should create one R script called `run_analysis.R` that does the following. 

* Merges the training and the test sets to create one data set.
* Extracts only the measurements on the mean and standard deviation for each measurement. 
* Uses descriptive activity names to name the activities in the data set
* Appropriately labels the data set with descriptive variable names. 
* From the data set in step 4, creates a second, independent tidy data set with the average of each variable for each activity and each subject.

The method `run_analysis()` is available in the R script called `run_analysis.R` and returns the required tidy dataset after having prepared an internal tidy dataset based on the prodived data files generated by the Samsung Galaxy S.


##  Pre-requisites

* `plyr` and `dplyr` R packages must be installed

* Download the raw ZIP file at the following URL : 
<a href="https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip">https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip</a>

* Unzip it in your working directory.

The data linked represent data collected from the accelerometers from the Samsung Galaxy S smartphone. A full description is available at the site where the data was obtained: 

<a href="http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones">http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones</a>

A general overview can be found below : 
![Markdown preferences pane](https://coursera-forum-screenshots.s3.amazonaws.com/ab/a2776024af11e4a69d5576f8bc8459/Slide2.png)
 ***Courtesy of David Hood*** : see <a href="https://class.coursera.org/getdata-015/forum/thread?thread_id=112">Coursera Forum link</a> 

##  Usage 

	source('~/run_analysis.R')
	result <- run_analysis()

##  Cookbook
This cookbook explain how the `run_analysis()` method proceeds to return the required dataset.
	
* Read `activity_labels.txt` file which will be used to label the subject activity for each measure

* Read `features.txt` file which will be used to label the measure columns

* Prepare a tidy dataset for test measures by using the internal method prepare_dataset. See Prepare dataset cookbook below.

* Prepare a tidy dataset for train measures by using the internal method prepare_dataset. See Prepare dataset cookbook below.

* Combine the 2 partial datasets (test and train) in a 'big' one internal tidy dataset

* Aggregate the values of this dataset in order to return the average of each variable for each activity and each subject


## Prepare dataset cookbook

A method is used to prepare data frame for test and train files since the are exactly the same in terms of format and naming convention. As a consequence the exact same piece of code has to be done for both. 

 	prepare_dataset(activity, features, type) 

***Parameters***

	activity : data frame which built from the "activity_labels.txt" file 
	features : data frame which built from the "features.txt" file 
	type : expected string are "test" and "plan".

This method returns a prepared tidy dataset based on the prodived data files generated by the Samsung Galaxy S. The type parameter will be used to select which files will be used here : test files or train files.


* Prepare file names to use with the type parameter thank to the naming convention used by the Samsung Galaxy S
* Read the recorded subject for the dataset from the `subject_****.txt` file 
* Read the corresponding recorded activity for dataset from the `y_****.txt` file 
* Append the activity name as a new column of this last created dataset (Usage of `dplyr:join` method in order to not be puzzled by `merge` method which does not preserve the row order...)
* Read the feature values for the dataset from the `X_****.txt` file and assign feature column names thanks to features column labelled `columnName`
* Extract only `...mean()` and `...std()` parameters from the feature values data frame created in step 5
* Build the expected internal dataset by combining the previously created dataset
* Remove `activityId` column and return the dataset
     